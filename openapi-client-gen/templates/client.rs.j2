use std::sync::Arc;

use super::config::Connector;
use super::config::ClientConfig;
use super::config::Config;
use super::api;

pub struct Client {
  config: Arc<dyn ClientConfig>
}

impl Client {
    pub fn new<C: Connector>(config: Config<C>) -> Client {
        Client {
          config: Arc::new(config),
        }
    }

    {%~ for tag in tags.values() %}
    /// {{tag.description}}
    pub fn {{tag.var_name()}}(&self) -> api::{{tag.struct_name()}} {
        api::{{tag.struct_name()}}::new(self.config.clone())
    }
    {% endfor %}
}
